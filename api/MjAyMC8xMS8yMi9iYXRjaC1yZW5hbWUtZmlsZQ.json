{"title":"如何优雅的批量重命名文件","date":"2020-11-22T04:53:47.000Z","date_formatted":{"ll":"2020年11月22日","L":"2020/11/22","MM-DD":"11-22"},"thumbnail":"https://cdn.jsdelivr.net/gh/gaowanliang/p/img/72940468_p0.png","link":"2020/11/22/batch-rename-file","comments":true,"tags":["教程"],"updated":"2020-11-22T07:57:09.407Z","content":"<h1 id=\"批量给文件添加前后缀\">批量给文件添加前后缀<a href=\"#批量给文件添加前后缀\" title=\"批量给文件添加前后缀\"></a></h1><h2 id=\"前缀\">前缀<a href=\"#前缀\" title=\"前缀\"></a></h2><p>如果你需要给某个类型的文件加上前缀，请参考下面的代码</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> /f <span class=\"string\">\"delims=\"</span> %%f <span class=\"keyword\">in</span> (<span class=\"string\">'dir /a /b *.mp3'</span>) <span class=\"keyword\">do</span> (</span><br><span class=\"line\">    ren <span class=\"string\">\"%%f\"</span> <span class=\"string\">\"N1-%%~nxf\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\">pause</span><br></pre></td></tr></table></figure>\n<p>其中<code>.mp3</code>是你需要修改的后缀名，而<code>N1-</code>是你需要添加的前缀</p>\n<h2 id=\"后缀\">后缀<a href=\"#后缀\" title=\"后缀\"></a></h2><p>如果你需要给某个类型的文件加上后缀，请参考下面的代码</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> /f <span class=\"string\">\"delims=\"</span> %%f <span class=\"keyword\">in</span> (<span class=\"string\">'dir /a /b *.mp3'</span>) <span class=\"keyword\">do</span> (</span><br><span class=\"line\">    ren <span class=\"string\">\"%%f\"</span> <span class=\"string\">\"%%~nf-N2%%~xf\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\">pause</span><br></pre></td></tr></table></figure>\n<p>其中<code>.mp3</code>是你需要修改的后缀名，而<code>-N2</code>是你需要添加的后缀</p>\n<h1 id=\"批量按顺序重命名\">批量按顺序重命名<a href=\"#批量按顺序重命名\" title=\"批量按顺序重命名\"></a></h1><p>如果你需要给文件按顺序重命名，请参考下面的代码</p>\n<h2 id=\"文件\">文件<a href=\"#文件\" title=\"文件\"></a></h2><h3 id=\"前缀-1\">前缀<a href=\"#前缀-1\" title=\"前缀\"></a></h3><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">set</span> a=0</span><br><span class=\"line\"></span><br><span class=\"line\">setlocal EnableDelayedExpansion</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> /f <span class=\"string\">\"delims=\"</span> %%f <span class=\"keyword\">in</span> (<span class=\"string\">'dir /a /b *.*'</span>) <span class=\"keyword\">do</span> (</span><br><span class=\"line\">    <span class=\"keyword\">if</span> not <span class=\"string\">\"%%~nxf\"</span>==<span class=\"string\">\"%~nx0\"</span> (</span><br><span class=\"line\">        <span class=\"built_in\">set</span> /A a+=1</span><br><span class=\"line\">        ren <span class=\"string\">\"%%f\"</span> <span class=\"string\">\"动漫!a!%%~xf\"</span></span><br><span class=\"line\">    )</span><br><span class=\"line\">)</span><br><span class=\"line\">pause</span><br></pre></td></tr></table></figure>\n<p>其中<code>动漫</code>是每个文件所拥有的前缀</p>\n<h3 id=\"后缀-1\">后缀<a href=\"#后缀-1\" title=\"后缀\"></a></h3><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">set</span> a=0</span><br><span class=\"line\"></span><br><span class=\"line\">setlocal EnableDelayedExpansion</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> /f <span class=\"string\">\"delims=\"</span> %%f <span class=\"keyword\">in</span> (<span class=\"string\">'dir /a /b *.*'</span>) <span class=\"keyword\">do</span> (</span><br><span class=\"line\">    <span class=\"keyword\">if</span> not <span class=\"string\">\"%%~nxf\"</span>==<span class=\"string\">\"%~nx0\"</span> (</span><br><span class=\"line\">        <span class=\"built_in\">set</span> /A a+=1</span><br><span class=\"line\">        ren <span class=\"string\">\"%%f\"</span> <span class=\"string\">\"!a!动漫%%~xf\"</span></span><br><span class=\"line\">    )</span><br><span class=\"line\">)</span><br><span class=\"line\">pause</span><br></pre></td></tr></table></figure>\n<p>其中<code>动漫</code>是每个文件所拥有的后缀</p>\n<h2 id=\"文件夹\">文件夹<a href=\"#文件夹\" title=\"文件夹\"></a></h2><h3 id=\"前缀-2\">前缀<a href=\"#前缀-2\" title=\"前缀\"></a></h3><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">set</span> a=1000</span><br><span class=\"line\">setlocal EnableDelayedExpansion</span><br><span class=\"line\"><span class=\"keyword\">for</span> /f <span class=\"string\">\"tokens=*\"</span> %%i <span class=\"keyword\">in</span> (<span class=\"string\">'dir /a:d /b'</span>) <span class=\"keyword\">do</span> (</span><br><span class=\"line\">    <span class=\"built_in\">set</span> /A a+=1</span><br><span class=\"line\">    ren <span class=\"string\">\"%%i\"</span> <span class=\"string\">\"电影!a!\"</span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n<p>其中<code>电影</code>是每个文件夹所拥有的前缀</p>\n<h3 id=\"后缀-2\">后缀<a href=\"#后缀-2\" title=\"后缀\"></a></h3><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">set</span> a=1000</span><br><span class=\"line\">setlocal EnableDelayedExpansion</span><br><span class=\"line\"><span class=\"keyword\">for</span> /f <span class=\"string\">\"tokens=*\"</span> %%i <span class=\"keyword\">in</span> (<span class=\"string\">'dir /a:d /b'</span>) <span class=\"keyword\">do</span> (</span><br><span class=\"line\">    <span class=\"built_in\">set</span> /A a+=1</span><br><span class=\"line\">    ren <span class=\"string\">\"%%i\"</span> <span class=\"string\">\"!a!电影\"</span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n<p>其中<code>电影</code>是每个文件夹所拥有的后缀</p>\n<h1 id=\"删去文件部分文件名\">删去文件部分文件名<a href=\"#删去文件部分文件名\" title=\"删去文件部分文件名\"></a></h1><h2 id=\"前缀-3\">前缀<a href=\"#前缀-3\" title=\"前缀\"></a></h2><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setlocal enabledelayedexpansion</span><br><span class=\"line\"><span class=\"keyword\">for</span> /f <span class=\"string\">\"delims=\"</span> %%i <span class=\"keyword\">in</span> (<span class=\"string\">'dir /b [Sakurato.Sub] *'</span>) <span class=\"keyword\">do</span> (</span><br><span class=\"line\">    <span class=\"built_in\">set</span> var=%%i</span><br><span class=\"line\">    <span class=\"built_in\">set</span> var=!var:[Sakurato.Sub] =!</span><br><span class=\"line\">    ren <span class=\"string\">\"%%i\"</span> <span class=\"string\">\"!var!\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\">pause</span><br></pre></td></tr></table></figure>\n<p>其中<code>[Sakurato.Sub]</code>是每个文件所拥有的前缀</p>\n<h2 id=\"中缀\">中缀<a href=\"#中缀\" title=\"中缀\"></a></h2><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setlocal enabledelayedexpansion</span><br><span class=\"line\"><span class=\"keyword\">for</span> /f <span class=\"string\">\"delims=\"</span> %%i <span class=\"keyword\">in</span> (<span class=\"string\">'dir /b *Nekopara*'</span>) <span class=\"keyword\">do</span> (</span><br><span class=\"line\">    <span class=\"built_in\">set</span> var=%%i</span><br><span class=\"line\">    <span class=\"built_in\">set</span> var=!var:Nekopara=!</span><br><span class=\"line\">    ren <span class=\"string\">\"%%i\"</span> <span class=\"string\">\"!var!\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\">pause</span><br></pre></td></tr></table></figure>\n<p>其中<code>Nekopara</code>是每个文件所拥有的中缀</p>\n<h2 id=\"后缀-3\">后缀<a href=\"#后缀-3\" title=\"后缀\"></a></h2><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setlocal enabledelayedexpansion</span><br><span class=\"line\"><span class=\"keyword\">for</span> /f <span class=\"string\">\"delims=\"</span> %%i <span class=\"keyword\">in</span> (<span class=\"string\">'dir /b * (HEVC-10Bit-2160P AAC)*'</span>) <span class=\"keyword\">do</span> (</span><br><span class=\"line\">    <span class=\"built_in\">set</span> var=%%i</span><br><span class=\"line\">    <span class=\"built_in\">set</span> var=!var: (HEVC-10Bit-2160P AAC)=!</span><br><span class=\"line\">    ren <span class=\"string\">\"%%i\"</span> <span class=\"string\">\"!var!\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\">pause</span><br></pre></td></tr></table></figure>\n<p>其中<code>(HEVC-10Bit-2160P AAC)</code>是每个文件所拥有的后缀</p>\n<h1 id=\"替换部分文件名\">替换部分文件名<a href=\"#替换部分文件名\" title=\"替换部分文件名\"></a></h1><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setlocal enabledelayedexpansion</span><br><span class=\"line\"><span class=\"keyword\">for</span> /f <span class=\"string\">\"delims=\"</span> %%i <span class=\"keyword\">in</span> (<span class=\"string\">'dir /b *Nekopara*'</span>) <span class=\"keyword\">do</span> (</span><br><span class=\"line\">    <span class=\"built_in\">set</span> var=%%i</span><br><span class=\"line\">    <span class=\"built_in\">set</span> var=!var:Nekopara=monika!</span><br><span class=\"line\">    ren <span class=\"string\">\"%%i\"</span> <span class=\"string\">\"!var!\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\">pause</span><br></pre></td></tr></table></figure>\n<p>其中<code>Nekopara</code>是每个文件所拥有的一部分，这一部分将会被<code>monika</code>所替换</p>\n<h1 id=\"自定义替换部分\">自定义替换部分<a href=\"#自定义替换部分\" title=\"自定义替换部分\"></a></h1><p>请配合<a href=\"https://www.bilibili.com/video/BV1sy4y1z7gs/\" target=\"_blank\">如何优雅的批量重命名文件【高玩】</a>使用</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DIR *.* /B &gt; list.csv</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">=<span class=\"string\">\"ren \"</span>&amp;A1&amp;<span class=\"string\">\" \"</span>&amp;B1&amp;C1&amp;<span class=\"string\">\".docx\"</span></span><br></pre></td></tr></table></figure>","prev":{"title":"在Debian/Ubuntu上使用rclone挂载Google Drive网盘","link":"2020/12/02/rclone-mount-gd"},"next":{"title":"Caddy 2 简明教程","link":"2020/11/10/caddy2-install"},"plink":"https://gwliang.com/2020/11/22/batch-rename-file/","toc":[{"id":"批量给文件添加前后缀","title":"批量给文件添加前后缀","index":"1","children":[{"id":"前缀","title":"前缀","index":"1.1"},{"id":"后缀","title":"后缀","index":"1.2"}]},{"id":"批量按顺序重命名","title":"批量按顺序重命名","index":"2","children":[{"id":"文件","title":"文件","index":"2.1","children":[{"id":"前缀-1","title":"前缀","index":"2.1.1"},{"id":"后缀-1","title":"后缀","index":"2.1.2"}]},{"id":"文件夹","title":"文件夹","index":"2.2","children":[{"id":"前缀-2","title":"前缀","index":"2.2.1"},{"id":"后缀-2","title":"后缀","index":"2.2.2"}]}]},{"id":"删去文件部分文件名","title":"删去文件部分文件名","index":"3","children":[{"id":"前缀-3","title":"前缀","index":"3.1"},{"id":"中缀","title":"中缀","index":"3.2"},{"id":"后缀-3","title":"后缀","index":"3.3"}]},{"id":"替换部分文件名","title":"替换部分文件名","index":"4"},{"id":"自定义替换部分","title":"自定义替换部分","index":"5"}],"reward":true,"copyright":{"license":"自由转载-非商用-禁止演绎-保持署名(<a href=\\\"https://creativecommons.org/licenses/by-nc-sa/4.0/\\\" rel=\\\"external nofollow\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)","author":"Gaowan Liang","link":"<a href=\"https://gwliang.com/2020/11/22/batch-rename-file/\" title=\"如何优雅的批量重命名文件\">https://gwliang.com/2020/11/22/batch-rename-file/</a>"}}