{"title":"优雅的批量重命名文件","date":"2020-11-22T04:53:47.000Z","date_formatted":{"ll":"2020年11月22日","L":"2020/11/22","MM-DD":"11-22"},"thumbnail":"https://cdn.jsdelivr.net/gh/gaowanliang/p/img/72940468_p0.png","link":"2020/11/22/batch-rename-file","comments":true,"tags":["教程"],"updated":"2020-11-22T05:09:38.229Z","content":"<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> /f <span class=\"string\">\"delims=\"</span> %%f <span class=\"keyword\">in</span> (<span class=\"string\">'dir /a /b *.mp3'</span>) <span class=\"keyword\">do</span>(</span><br><span class=\"line\">    ren <span class=\"string\">\"%%f\"</span> <span class=\"string\">\"N1-%%~nxf\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\">pause</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> /f <span class=\"string\">\"delims=\"</span> %%f <span class=\"keyword\">in</span> (<span class=\"string\">'dir /a /b *.mp3'</span>) <span class=\"keyword\">do</span>(</span><br><span class=\"line\">    ren <span class=\"string\">\"%%f\"</span> <span class=\"string\">\"%%~nf-N2%%~xf\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\">pause</span><br></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> /f <span class=\"string\">\"delims=\"</span> %%f <span class=\"keyword\">in</span> (<span class=\"string\">'dir /a /b *.mp3'</span>) <span class=\"keyword\">do</span>(</span><br><span class=\"line\">    ren <span class=\"string\">\"%%f\"</span> <span class=\"string\">\"%%~nf-N2%%~xf\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\">pause</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">set</span> a=0</span><br><span class=\"line\"></span><br><span class=\"line\">setlocal EnableDelayedExpansion</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> /f <span class=\"string\">\"delims=\"</span> %%f <span class=\"keyword\">in</span> (<span class=\"string\">'dir /a /b *.*'</span>) <span class=\"keyword\">do</span> (</span><br><span class=\"line\">    <span class=\"keyword\">if</span> not <span class=\"string\">\"%%~nxf\"</span>==<span class=\"string\">\"%~nx0\"</span> (</span><br><span class=\"line\">        <span class=\"built_in\">set</span> /A a+=1</span><br><span class=\"line\">        ren <span class=\"string\">\"%%f\"</span> <span class=\"string\">\"动漫!a!%%~xf\"</span></span><br><span class=\"line\">    )</span><br><span class=\"line\">)</span><br><span class=\"line\">pause</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setlocal enabledelayedexpansion</span><br><span class=\"line\"><span class=\"keyword\">for</span> /f <span class=\"string\">\"delims=\"</span> %%i <span class=\"keyword\">in</span> (<span class=\"string\">'dir /b *[Sakurato.Sub] *'</span>) <span class=\"keyword\">do</span> (</span><br><span class=\"line\">    <span class=\"built_in\">set</span> var=%%i</span><br><span class=\"line\">    <span class=\"built_in\">set</span> var=!var:[Sakurato.Sub] =!</span><br><span class=\"line\">    ren <span class=\"string\">\"%%i\"</span> <span class=\"string\">\"!var!\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\">pause</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DIR *.* /B &gt; list.csv</span><br></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">=<span class=\"string\">\"ren \"</span>&amp;A1&amp;<span class=\"string\">\" \"</span>&amp;B1&amp;C1&amp;<span class=\"string\">\".docx\"</span></span><br></pre></td></tr></table></figure>","next":{"title":"Caddy 2 简明教程","link":"2020/11/10/caddy2-install"},"plink":"https://gwliang.com/2020/11/22/batch-rename-file/","reward":true,"copyright":{"license":"自由转载-非商用-禁止演绎-保持署名(<a href=\\\"https://creativecommons.org/licenses/by-nc-sa/4.0/\\\" rel=\\\"external nofollow\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)","author":"Gaowan Liang","link":"<a href=\"https://gwliang.com/2020/11/22/batch-rename-file/\" title=\"优雅的批量重命名文件\">https://gwliang.com/2020/11/22/batch-rename-file/</a>"}}