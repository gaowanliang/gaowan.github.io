{"title":"OneDrive 上传工具 OneDriveUploader","date":"2020-08-29T11:36:03.000Z","date_formatted":{"ll":"2020年8月29日","L":"2020/08/29","MM-DD":"08-29"},"thumbnail":"https://cdn.jsdelivr.net/gh/gaowanliang/p/img/64360477_p0.jpg","link":"2020/08/29/OneDriveUploader-use","comments":true,"tags":["教程"],"categories":["OneDrive"],"updated":"2020-12-02T02:55:51.964Z","content":"<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">更新</span><br><span class=\"line\">【2019.12.21】</span><br><span class=\"line\"> 支持跳过网盘中已存在的同名文件。</span><br><span class=\"line\"></span><br><span class=\"line\">【2019.12.20】</span><br><span class=\"line\">目前同时支持国际版、个人版(家庭版)、中国版(世纪互联)。</span><br><span class=\"line\"></span><br><span class=\"line\">【2019.12.15】</span><br><span class=\"line\">修复授权失败、上传文件大小为0等问题。</span><br><span class=\"line\">现已支持arm、x86、x64平台的系统。</span><br><span class=\"line\"></span><br><span class=\"line\">【2019.11.29】</span><br><span class=\"line\">新增多线程上传、MacOS客户端。</span><br><span class=\"line\">修复了一个致命bug，建议之前装过的更新下程序。</span><br><span class=\"line\">功能</span><br><span class=\"line\">支持上传文件和文件夹到指定目录，并保持上传前的目录结构。</span><br><span class=\"line\">支持命令参数使用，方便外部程序调用。</span><br><span class=\"line\">支持自定义上传分块大小。</span><br><span class=\"line\">支持多线程上传(多文件同时上传)。</span><br><span class=\"line\">支持根据文件大小动态调整重试次数，对抗不好的网络环境。</span><br><span class=\"line\">使用</span><br><span class=\"line\">Github地址：https:&#x2F;&#x2F;github.com&#x2F;MoeClub&#x2F;OneList&#x2F;tree&#x2F;master&#x2F;OneDriveUploader</span><br></pre></td></tr></table></figure>\n<p>这里只详细说下Linux的用法，Windows后面大概说下。</p>\n<p>Windows、MacOS系统下载地址→<a href=\"https://github.com/MoeClub/OneList/tree/master/OneDriveUploader/amd64\" target=\"_blank\">传送门</a>，直接将程序下载到本地后，按照下面方法进行授权、初始化，然后就可以使用命令上传了。</p>\n<h1 id=\"授权认证\">授权认证<a href=\"#授权认证\" title=\"授权认证\"></a></h1><p>点击右侧URL登录并授权，授权地址→<a href=\"https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id=78d4dc35-7e46-42c6-9023-2d39314433a5&response_type=code&redirect_uri=http://localhost/onedrive-login&response_mode=query&scope=offline_access%20User.Read%20Files.ReadWrite.All\" target=\"_blank\">【国际版、个人版(家庭版)】</a>、<a href=\"https://login.chinacloudapi.cn/common/oauth2/v2.0/authorize?client_id=dfe36e60-6133-48cf-869f-4d15b8354769&response_type=code&redirect_uri=http://localhost/onedrive-login&response_mode=query&scope=offline_access%20User.Read%20Files.ReadWrite.All\" target=\"_blank\">【中国版(世纪互联)】</a>。</p>\n<p>授权后会获取一个localhost开头打不开的链接，这里复制好整个链接地址，包括localhost。</p>\n<h1 id=\"安装onedriveuploader\">安装OneDriveUploader<a href=\"#安装onedriveuploader\" title=\"安装OneDriveUploader\"></a></h1><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#64位系统下载</span></span><br><span class=\"line\">wget https://raw.githubusercontent.com/MoeClub/OneList/master/OneDriveUploader/amd64/linux/OneDriveUploader -P /usr/<span class=\"built_in\">local</span>/bin/</span><br><span class=\"line\"><span class=\"comment\">#32位系统下载</span></span><br><span class=\"line\">wget https://raw.githubusercontent.com/MoeClub/OneList/master/OneDriveUploader/i386/linux/OneDriveUploader -P /usr/<span class=\"built_in\">local</span>/bin/</span><br><span class=\"line\"><span class=\"comment\">#arm架构下载</span></span><br><span class=\"line\">wget https://raw.githubusercontent.com/MoeClub/OneList/master/OneDriveUploader/arm/linux/OneDriveUploader -P /usr/<span class=\"built_in\">local</span>/bin/</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#给予权限</span></span><br><span class=\"line\">chmod +x /usr/<span class=\"built_in\">local</span>/bin/OneDriveUploader</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#可选 软链接 类似于 Windows 的快捷方式</span></span><br><span class=\"line\">ln -s /usr/<span class=\"built_in\">local</span>/bin/OneDriveUploader /usr/bin/OneDriveUploader</span><br></pre></td></tr></table></figure>\n<h1 id=\"初始化配置\">初始化配置<a href=\"#初始化配置\" title=\"初始化配置\"></a></h1><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#国际版，将url换成你上面复制的授权地址，包括http://loaclhost。</span></span><br><span class=\"line\">OneDriveUploader -a <span class=\"string\">\"url\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#个人版(家庭版)，将url换成你上面复制的授权地址，包括http://loaclhost。</span></span><br><span class=\"line\">OneDriveUploader -ms -a <span class=\"string\">\"url\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#中国版(世纪互联)，将url换成你上面复制的授权地址，包括http://loaclhost。</span></span><br><span class=\"line\">OneDriveUploader -cn -a <span class=\"string\">\"url\"</span></span><br></pre></td></tr></table></figure>\n<p>如果提示<code>Init config file: /path/to/file/auth.json</code>类似信息，则初始化成功。</p>\n<h1 id=\"使用命令\">使用命令<a href=\"#使用命令\" title=\"使用命令\"></a></h1><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Usage of OneDriveUploader:</span><br><span class=\"line\">  -a <span class=\"built_in\">string</span></span><br><span class=\"line\">        <span class=\"comment\">// 初始化授权</span></span><br><span class=\"line\">        Setup <span class=\"keyword\">and</span> Init auth.json.</span><br><span class=\"line\">  -b <span class=\"built_in\">string</span></span><br><span class=\"line\">        <span class=\"comment\">// 自定义上传分块大小, 可以提高网络吞吐量, 受限于磁盘性能和网络速度.</span></span><br><span class=\"line\">        Set block <span class=\"built_in\">size</span>. [Unit: M; <span class=\"number\">5</span>&lt;=b&lt;=<span class=\"number\">60</span>;] (<span class=\"keyword\">default</span> <span class=\"string\">\"10\"</span>)</span><br><span class=\"line\">  -c <span class=\"built_in\">string</span></span><br><span class=\"line\">        <span class=\"comment\">// 配置文件路径</span></span><br><span class=\"line\">        Config file. (<span class=\"keyword\">default</span> <span class=\"string\">\"auth.json\"</span>)</span><br><span class=\"line\">  -n <span class=\"built_in\">string</span></span><br><span class=\"line\">        <span class=\"comment\">// 上传单个文件时,在网盘中重命名</span></span><br><span class=\"line\">        Rename file on upload to remote.</span><br><span class=\"line\">  -r <span class=\"built_in\">string</span></span><br><span class=\"line\">        <span class=\"comment\">// 上传到网盘中的某个目录, 默认: 根目录</span></span><br><span class=\"line\">        Upload to reomte path.</span><br><span class=\"line\">  -s <span class=\"built_in\">string</span></span><br><span class=\"line\">        <span class=\"comment\">// *必要参数, 要上传的文件或文件夹</span></span><br><span class=\"line\">        Upload item.</span><br><span class=\"line\">  -t <span class=\"built_in\">string</span></span><br><span class=\"line\">        <span class=\"comment\">// 线程数, 同时上传文件的个数. 默认: 2</span></span><br><span class=\"line\">        Set thread num. (<span class=\"keyword\">default</span> <span class=\"string\">\"2\"</span>)</span><br><span class=\"line\">  -f</span><br><span class=\"line\">        <span class=\"comment\">// 开关(推荐)</span></span><br><span class=\"line\">        <span class=\"comment\">// 加上 -f 参数，强制读取 auth.json 中的块大小配置和多线程配置.</span></span><br><span class=\"line\">        <span class=\"comment\">// 不加 -f 参数, 每次覆盖保存当前使用参数到 auth.json 配置文件中.</span></span><br><span class=\"line\">        Force Read <span class=\"built_in\">config</span> form <span class=\"built_in\">config</span> file. [BlockSize, ThreadNum]</span><br><span class=\"line\">  -skip</span><br><span class=\"line\">        <span class=\"comment\">// 开关</span></span><br><span class=\"line\">        <span class=\"comment\">// 跳过上传网盘中已存在的同名文件. (默认不跳过)</span></span><br><span class=\"line\">        Skip exist file on remote.</span><br><span class=\"line\">  -cn</span><br><span class=\"line\">        <span class=\"comment\">// 开关</span></span><br><span class=\"line\">        <span class=\"comment\">// 授权中国版(世纪互联), 需要此参数.</span></span><br><span class=\"line\">        OneDrive by <span class=\"number\">21</span>Vianet.</span><br><span class=\"line\">  -ms</span><br><span class=\"line\">        <span class=\"comment\">// 开关</span></span><br><span class=\"line\">        <span class=\"comment\">// 授权个人版(家庭版), 需要此参数.</span></span><br><span class=\"line\">        OneDrive by Microsoft.</span><br></pre></td></tr></table></figure>\n<h2 id=\"命令示例\">命令示例<a href=\"#命令示例\" title=\"命令示例\"></a></h2><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#将当前目录下的mm00.jpg文件上传到OneDrive网盘根目录</span></span><br><span class=\"line\">OneDriveUploader -c /path/to/file/auth.json -s <span class=\"string\">\"mm00.jpg\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#将当前目录下的mm00.jpg文件上传到OneDrive网盘根目录，并改名为mm01.jpg</span></span><br><span class=\"line\">OneDriveUploader -c /path/to/file/auth.json -s <span class=\"string\">\"mm00.jpg\"</span> -n <span class=\"string\">\"mm01.jpg\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#将当前目录下的Download文件夹上传到OneDrive网盘根目录</span></span><br><span class=\"line\">OneDriveUploader -c /path/to/file/auth.json -s <span class=\"string\">\"Download\"</span> </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#将当前目录下的Download文件夹上传到OneDrive网盘Test目录中</span></span><br><span class=\"line\">OneDriveUploader -c /path/to/file/auth.json -s <span class=\"string\">\"Download\"</span> -r <span class=\"string\">\"Test\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#将同目录下的Download文件夹上传到OneDriv网盘Test目录中，使用10线程</span></span><br><span class=\"line\">OneDriveUploader -c /path/to/file/auth.json -t 10 -s <span class=\"string\">\"Download\"</span> -r <span class=\"string\">\"Test\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#将同目录下的Download文件夹上传到OneDrive网盘Test目录中，使用15线程，并设置分块大小为20M</span></span><br><span class=\"line\">OneDriveUploader -c /path/to/file/auth.json -t 15 -b 20 -s <span class=\"string\">\"Download\"</span> -r <span class=\"string\">\"Test\"</span></span><br></pre></td></tr></table></figure>\n<p><code>/path/to/file/auth.json</code>为初始化时，生成的auth.json绝对路径地址，本文默认<code>/root/auth.json</code>，自行调整。</p>\n<p>注意：如果你之前上传手动中断过，再上传的时候，请使用-skip参数，默认会跳过你已经上传过的文件/文件夹。</p>\n<h1 id=\"aria2自动上传\">Aria2自动上传<a href=\"#aria2自动上传\" title=\"Aria2自动上传\"></a></h1><p>同样的这里也会提供个配套的Aria2自动上传脚本\n上传脚本代码如下：</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\">GID=<span class=\"string\">\"<span class=\"variable\">$1</span>\"</span>;</span><br><span class=\"line\">FileNum=<span class=\"string\">\"<span class=\"variable\">$2</span>\"</span>;</span><br><span class=\"line\">File=<span class=\"string\">\"<span class=\"variable\">$3</span>\"</span>;</span><br><span class=\"line\">MaxSize=<span class=\"string\">\"15728640\"</span>;</span><br><span class=\"line\">Thread=<span class=\"string\">\"3\"</span>;  <span class=\"comment\">#默认3线程，自行修改，服务器配置不好的话，不建议太多</span></span><br><span class=\"line\">Block=<span class=\"string\">\"20\"</span>;  <span class=\"comment\">#默认分块20m，自行修改</span></span><br><span class=\"line\">RemoteDIR=<span class=\"string\">\"\"</span>;  <span class=\"comment\">#上传到Onedrive的路径，默认为根目录，如果要上传到MOERATS目录，\"\"里面请填成MOERATS</span></span><br><span class=\"line\">LocalDIR=<span class=\"string\">\"/www/download/\"</span>;  <span class=\"comment\">#Aria2下载目录，记得最后面加上/</span></span><br><span class=\"line\">Uploader=<span class=\"string\">\"/usr/local/bin/OneDriveUploader\"</span>;  <span class=\"comment\">#上传的程序完整路径，默认为本文安装的目录</span></span><br><span class=\"line\">Config=<span class=\"string\">\"/root/auth.json\"</span>;  <span class=\"comment\">#初始化生成的配置auth.json绝对路径，参考第3步骤生成的路径</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> [[ -z $(<span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$FileNum</span>\"</span> |grep -o <span class=\"string\">'[0-9]*'</span> |head -n1) ]]; <span class=\"keyword\">then</span> FileNum=<span class=\"string\">'0'</span>; <span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [[ <span class=\"string\">\"<span class=\"variable\">$FileNum</span>\"</span> -le <span class=\"string\">'0'</span> ]]; <span class=\"keyword\">then</span> <span class=\"built_in\">exit</span> 0; <span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [[ <span class=\"string\">\"<span class=\"variable\">$#</span>\"</span> != <span class=\"string\">'3'</span> ]]; <span class=\"keyword\">then</span> <span class=\"built_in\">exit</span> 0; <span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"function\"><span class=\"title\">LoadFile</span></span>()&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> [[ ! -e <span class=\"string\">\"<span class=\"variable\">$&#123;Uploader&#125;</span>\"</span> ]]; <span class=\"keyword\">then</span> <span class=\"built_in\">return</span>; <span class=\"keyword\">fi</span></span><br><span class=\"line\">  IFS_BAK=<span class=\"variable\">$IFS</span></span><br><span class=\"line\">  IFS=$<span class=\"string\">'\\n'</span></span><br><span class=\"line\">  tmpFile=<span class=\"string\">\"<span class=\"variable\">$(echo \"$&#123;File/#$LocalDIR&#125;\" |cut -f1 -d'/')</span>\"</span></span><br><span class=\"line\">  FileLoad=<span class=\"string\">\"<span class=\"variable\">$&#123;LocalDIR&#125;</span><span class=\"variable\">$&#123;tmpFile&#125;</span>\"</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> [[ ! -e <span class=\"string\">\"<span class=\"variable\">$&#123;FileLoad&#125;</span>\"</span> ]]; <span class=\"keyword\">then</span> <span class=\"built_in\">return</span>; <span class=\"keyword\">fi</span></span><br><span class=\"line\">  ItemSize=$(du -s <span class=\"string\">\"<span class=\"variable\">$&#123;FileLoad&#125;</span>\"</span> |cut -f1 |grep -o <span class=\"string\">'[0-9]*'</span> |head -n1)</span><br><span class=\"line\">  <span class=\"keyword\">if</span> [[ -z <span class=\"string\">\"<span class=\"variable\">$ItemSize</span>\"</span> ]]; <span class=\"keyword\">then</span> <span class=\"built_in\">return</span>; <span class=\"keyword\">fi</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> [[ <span class=\"string\">\"<span class=\"variable\">$ItemSize</span>\"</span> -ge <span class=\"string\">\"<span class=\"variable\">$MaxSize</span>\"</span> ]]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> -ne <span class=\"string\">\"\\033[33m<span class=\"variable\">$&#123;FileLoad&#125;</span> \\033[0mtoo large to spik.\\n\"</span>;</span><br><span class=\"line\">    <span class=\"built_in\">return</span>;</span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">  <span class=\"variable\">$&#123;Uploader&#125;</span> -c <span class=\"string\">\"<span class=\"variable\">$&#123;Config&#125;</span>\"</span> -t <span class=\"string\">\"<span class=\"variable\">$&#123;Thread&#125;</span>\"</span> -b <span class=\"string\">\"<span class=\"variable\">$&#123;Block&#125;</span>\"</span> -s <span class=\"string\">\"<span class=\"variable\">$&#123;FileLoad&#125;</span>\"</span> -r <span class=\"string\">\"<span class=\"variable\">$&#123;RemoteDIR&#125;</span>\"</span> -skip</span><br><span class=\"line\">  <span class=\"keyword\">if</span> [[ $? == <span class=\"string\">'0'</span> ]]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    rm -rf <span class=\"string\">\"<span class=\"variable\">$&#123;FileLoad&#125;</span>\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">  IFS=<span class=\"variable\">$IFS_BAK</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">LoadFile;</span><br></pre></td></tr></table></figure>\n<p>编辑好上传脚本后，可以检测下脚本编码是否正确，比如我脚本路径为<code>/root/upload.sh</code>，使用命令：</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bash /root/upload.sh</span><br></pre></td></tr></table></figure>\n<p>如果无任何输出，则正确，反之输出类似$&#39;r&#39;: command not found错误，则需要转换下编码格式，具体步骤如下。</p>\n<p>先安装dos2unix：</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#CentOS系统</span></span><br><span class=\"line\">yum install dos2unix -y</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#Debian/Ubuntu系统</span></span><br><span class=\"line\">apt install dos2unix -y</span><br><span class=\"line\">再转换编码：</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#后面为脚本路径</span></span><br><span class=\"line\">dos2unix /root/upload.sh</span><br></pre></td></tr></table></figure>\n<h1 id=\"windows使用\">Windows使用<a href=\"#windows使用\" title=\"Windows使用\"></a></h1><p>这里就随便补充下Windows使用，先下载程序文件，下载地址→传送门。</p>\n<p>比如我将exe文件放到D盘，然后使用Win+R，输入CMD运行，调出窗口后，使用命令：</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#进入D盘</span><br><span class=\"line\"><span class=\"built_in\">cd</span> /d D:\\</span><br><span class=\"line\"></span><br><span class=\"line\">#国际版初始化，将url换成你上面复制的授权地址，包括http://loaclhost。</span><br><span class=\"line\">OneDriveUploader.exe -a \"url\"</span><br><span class=\"line\"></span><br><span class=\"line\">#个人版(家庭版)初始化，将url换成你上面复制的授权地址，包括http://loaclhost。</span><br><span class=\"line\">OneDriveUploader.exe -ms -a \"url\"</span><br><span class=\"line\"></span><br><span class=\"line\">#中国版(世纪互联)初始化，将url换成你上面复制的授权地址，包括http://loaclhost。</span><br><span class=\"line\">OneDriveUploader.exe -cn -a \"url\"</span><br></pre></td></tr></table></figure>\n<p>然后上传命令和上面一样，只需要把<code>OneDriveUploader</code>改成<code>OneDriveUploader.exe</code>即可。</p>\n","prev":{"title":"Caddy 2 简明教程","link":"2020/11/10/caddy2-install"},"next":{"title":"OneDrive目录列表OneList使用方法","link":"2020/08/25/onelist-use"},"plink":"https://gwliang.com/2020/08/29/OneDriveUploader-use/","toc":[{"id":"授权认证","title":"授权认证","index":"1"},{"id":"安装onedriveuploader","title":"安装OneDriveUploader","index":"2"},{"id":"初始化配置","title":"初始化配置","index":"3"},{"id":"使用命令","title":"使用命令","index":"4","children":[{"id":"命令示例","title":"命令示例","index":"4.1"}]},{"id":"aria2自动上传","title":"Aria2自动上传","index":"5"},{"id":"windows使用","title":"Windows使用","index":"6"}],"reward":true,"copyright":{"license":"自由转载-非商用-禁止演绎-保持署名(<a href=\\\"https://creativecommons.org/licenses/by-nc-sa/4.0/\\\" rel=\\\"external nofollow\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)","author":"Gaowan Liang","link":"<a href=\"https://gwliang.com/2020/08/29/OneDriveUploader-use/\" title=\"OneDrive 上传工具 OneDriveUploader\">https://gwliang.com/2020/08/29/OneDriveUploader-use/</a>"}}